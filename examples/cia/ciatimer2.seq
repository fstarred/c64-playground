;---------------------------------------;;   CIA TIMER A AND B (IRQ);;   INTERRUPT IS TRIGGERED ON TIMER 2;   UNDERFLOW, WHICH DECREASE ON;   TIMER A UNDERFLOW;;---------------------------------------    *= $1000TIMERAVAL = $1000TIMERBVAL = $0100    SEI    LDA #$7F  ; DISABLE ALL FLAGS    STA $DC0D ; INT CNT STATUS REGISTER    ; BIT 76543210    LDA #%10000010    STA $DC0D ; INT CNT STATUS REGISTER; BIT 1: ENABLE INTER BY TIM B UNDERFLOW; BIT 7: ENABLE FLAG    ; BIT 76543210    LDA #%01010001    STA $DC0F ; TIMER B CONTROL REGISTER    ; BIT 4: LOAD START VALUE INTO TIMER    ; BIT 5-6: MODE %10    ; TIMER COUNTS UNDERFLOWS OF TIMER A    LDA #<TIMERAVAL    STA $DC04    LDA #>TIMERAVAL    STA $DC05    LDX #<TIMERBVAL    STX $DC06    LDX #>TIMERBVAL    STX $DC07    LDA #<IRQ    STA $0314    LDA #>IRQ    STA $0315    ; BIT 76543210    LDA #%10010001    STA $DC0E ; TIMER A CONTROL REGISTER    ; BIT 7: TOD SPEED 50 HZ    ; BIT 4: LOAD START VALUE INTO TIMER    ; BIT 0: START TIMER    CLI    JMP *IRQ    LDA $DC0D   ;IRQ ACKNOWLEDGEMENT    INC $D020    PLA    TAY    PLA    TAX    PLA    RTI