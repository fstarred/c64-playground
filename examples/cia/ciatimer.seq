;---------------------------------------;;  CIA TIMER IRQ EXAMPLE;;  INTERRUPT IS TRIGGERED ON TIMER A;  UNDERFLOW;;---------------------------------------    *= $1000TIMERAVAL = $0100TIMERBVAL = $FFFE ; NOT USED    SEI    LDA #$7F  ; DISABLE ALL FLAGS    STA $DC0D ; INT CNT STATUS REGISTER    ; BIT 76543210    LDA #%10000001    STA $DC0D ; INT CNT STATUS REGISTER; BIT 1: ENABLE INTER BY TIM A UNDERFLOW; BIT 7: ENABLE FLAG    ; BIT 76543210    LDA #%00010000 ; OFF    STA $DC0F ; TIMER B CONTROL REGISTER    ; BIT 4: LOAD START VALUE INTO TIMER    LDA #<TIMERAVAL    STA $DC04    LDA #>TIMERAVAL    STA $DC05    LDX #<TIMERBVAL    STX $DC06    LDX #>TIMERBVAL    STX $DC07    LDA #<IRQ    STA $0314    LDA #>IRQ    STA $0315    ; BIT 76543210    LDA #%00010001    STA $DC0E ; TIMER A CONTROL REGISTER    ; BIT 4: LOAD START VALUE INTO TIMER    ; BIT 0: START TIMER    CLI    JMP *IRQ    LDA $DC0D   ;IRQ ACKNOWLEDGEMENT    INC $D020    PLA    TAY    PLA    TAX    PLA    RTI