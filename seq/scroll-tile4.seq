;---------------------------------------;;   SCROLL-EXAMPLE TILE 4X4;;;---------------------------------------    *= $1000SOURCESCREEN = $04DESTSCREEN = $06    JSR $E544    JSR DRAWCHAR    JSR DRAWCOLOR    SEI    LDA #$7F    LDX #$01    STA $DC0D    STA $DD0D    STX $D01A    LDA #$17    LDX #$C8    LDY #$17    STA $D011    STX $D016    STY $D018    LDA #<IRQ    LDX #>IRQ    LDY #65    STA $0314    STX $0315    STY $D012    LDA $DC0D    LDA $DD0D    ASL $D019    CLI    JMP *IRQ    LDA #<IRQ2    LDX #>IRQ2    LDY #$FF    STA $0314    STX $0315    STY $D012    ASL $D019    JMP $EA81IRQ2    LDA XOFFSET    AND #7    STA XOFFSET    LDA $D016    AND #248    ORA XOFFSET    STA $D016    LDA #<IRQ    LDX #>IRQ    LDY #65    STA $0314    STX $0315    STY $D012    JSR CHECKMOVE    ASL $D019    JMP $EA81DRAWCHAR    LDX #0    LDA #0    STA $0400,X    STA $0500,X    STA $0600,X    STA $0700,X    INX    TXA    BNE DRAWCHAR+4    RTSDRAWCOLOR    LDA #$00    STA DESTSCREEN    LDA #$D8    STA DESTSCREEN+1    LDA #$00    LDX #$5ADC1    LDA CCOLOR    CLC    ADC #$01    STA CCOLOR    LDY #$00    STA (DESTSCREEN),Y    INY    STA (DESTSCREEN),Y    INY    STA (DESTSCREEN),Y    INY    STA (DESTSCREEN),Y    LDY #$28    STA (DESTSCREEN),Y    INY    STA (DESTSCREEN),Y    INY    STA (DESTSCREEN),Y    INY    STA (DESTSCREEN),Y    LDY #$50    STA (DESTSCREEN),Y    INY    STA (DESTSCREEN),Y    INY    STA (DESTSCREEN),Y    INY    STA (DESTSCREEN),Y    LDY #$78    STA (DESTSCREEN),Y    INY    STA (DESTSCREEN),Y    INY    STA (DESTSCREEN),Y    INY    STA (DESTSCREEN),Y    LDA DESTSCREEN    CLC    ADC #$04    STA DESTSCREEN    BCC *+4    INC DESTSCREEN+1    DEX    TXA    AND #$0F    BNE DC1    LDA DESTSCREEN    CLC    ADC #$78    STA DESTSCREEN    BCC *+4    INC DESTSCREEN+1    TXA    LSR A    LSR A    LSR A    LSR A    BEQ DC2    SEC    SBC #$01    ASL A    ASL A    ASL A    ASL A    CLC    ADC #$0A    TAX    BCC DC1     ;BRADC2    RTSCCOLOR .BYTE $00CHECKMOVEDJRR    LDA $DC00DJRRB    LDY #0    LDX #0    LSR A    BCS DJR0    DEYDJR0    LSR A    BCS DJR1    INYDJR1    LSR A    BCS DJR2    DEXDJR2    LSR A    BCS DJR3    INXDJR3    LSR A    STX DX    STY DY    BCS NOTFIRE    LDA STOP    BNE EXITFIRE    INC XOFFSET    LDA #$01    STA STOPEXITFIRE    RTSNOTFIRE    LDA DX    BNE MOVEX    LDA DY    BNE MOVEY    LDA #0    STA STOP    RTSMOVEY    LDA STOP    BEQ MY1    RTSMY1    LDA #$01    STA STOP    LDA DY    CMP #1    BEQ GODOWN    JMP UPGODOWN    JMP DOWNMOVEX    LDA STOP    BEQ MX1    RTSMX1    LDA #$01    STA STOP    LDA DX    CMP #$01    BEQ GORIGHT    JMP LEFTGORIGHT    JMP RIGHTDOWN    LDY #39    LDA #$00    STA SOURCESCREEN    LDA #$04    STA SOURCESCREEN+1    LDA TEMPADDRESS    STA CRT2+1    LDA TEMPADDRESS+1    STA CRT2+2    JSR COPYROWTMP    LDY #39    LDA #$00    STA SOURCESCREEN    LDA #$D8    STA SOURCESCREEN+1    LDA TEMPADDRESS+2    STA CRT2+1    LDA TEMPADDRESS+3    STA CRT2+2    JSR COPYROWTMP    LDA #$28    STA SOURCESCREEN    LDA #$04    STA SOURCESCREEN+1    LDA #$00    STA DESTSCREEN    LDA #$04    STA DESTSCREEN+1    JSR DCOPYSCREENRAM    LDA ROFFS    TAX    LDA #$A0D1    SEC    SBC #$28    DEX    BNE D1    STA SOURCESCREEN    SEC    SBC #$28    STA DESTSCREEN    LDA #$D8    STA SOURCESCREEN+1    STA DESTSCREEN+1    JSR COPYROWRAM    LDA ROFFS    CMP #$03    BNE *+4    LDA #$FF    CLC    ADC #$01    STA ROFFS    LDY #39    LDA #$98    STA SOURCESCREEN    LDA #$07    STA SOURCESCREEN+1    LDA TEMPADDRESS    STA CTR1+1    LDA TEMPADDRESS+1    STA CTR1+2    JSR COPYTMPROW    LDY #39    LDA #$98    STA SOURCESCREEN    LDA #$DB    STA SOURCESCREEN+1    LDA TEMPADDRESS+2    STA CTR1+1    LDA TEMPADDRESS+3    STA CTR1+2    JSR COPYTMPROW    RTSUP    LDY #39    LDA #$98    STA SOURCESCREEN    LDA #$07    STA SOURCESCREEN+1    LDA TEMPADDRESS    STA CRT2+1    LDA TEMPADDRESS+1    STA CRT2+2    JSR COPYROWTMP    LDY #39    LDA #$98    STA SOURCESCREEN    LDA #$DB    STA SOURCESCREEN+1    LDA TEMPADDRESS+2    STA CRT2+1    LDA TEMPADDRESS+3    STA CRT2+2    JSR COPYROWTMP    LDA #$70    STA SOURCESCREEN    LDA #$07    STA SOURCESCREEN+1    LDA #$98    STA DESTSCREEN    LDA #$07    STA DESTSCREEN+1    JSR UCOPYSCREENRAM    LDA ROFFS    EOR #$03    TAX    LDA #$00U1    CLC    ADC #$28    DEX    BNE U1    STA SOURCESCREEN    CLC    ADC #$28    STA DESTSCREEN    LDA #$D8    STA SOURCESCREEN+1    STA DESTSCREEN+1    JSR COPYROWRAM    LDA ROFFS    BNE *+4    LDA #$04    SEC    SBC #$01    STA ROFFS    LDY #39    LDA #$00    STA SOURCESCREEN    LDA #$04    STA SOURCESCREEN+1    LDA TEMPADDRESS    STA CTR1+1    LDA TEMPADDRESS+1    STA CTR1+2    JSR COPYTMPROW    LDY #39    LDA #$00    STA SOURCESCREEN    LDA #$D8    STA SOURCESCREEN+1    LDA TEMPADDRESS+2    STA CTR1+1    LDA TEMPADDRESS+3    STA CTR1+2    JSR COPYTMPROW    RTSLEFT    LDY #39    JSR COPYCHARTMP    LDY #39    JSR COPYCOLORTMP    LDA #$00    STA SOURCESCREEN    LDA #$04    STA SOURCESCREEN+1    LDA #$01    STA DESTSCREEN    LDA #$04    STA DESTSCREEN+1    JSR LCOPYSCREENRAM    LDA COFFS    EOR #$03    STA SOURCESCREEN    CLC    ADC #$01    STA DESTSCREEN    LDA #$D8    STA SOURCESCREEN+1    STA DESTSCREEN+1    JSR COPYCOLRAM    LDA COFFS    BNE *+4    LDA #$04    SEC    SBC #$01    STA COFFS    LDY #0    JSR COPYTMPCHAR    LDY #0    JSR COPYTMPCOLOR    RTSRIGHT    LDY #$00    JSR COPYCHARTMP    LDY #$00    JSR COPYCOLORTMP    LDA #$01    STA SOURCESCREEN    LDA #$04    STA SOURCESCREEN+1    LDA #$00    STA DESTSCREEN    LDA #$04    STA DESTSCREEN+1    JSR RCOPYSCREENRAM    LDA COFFS    EOR #$03    STA DESTSCREEN    CLC    ADC #$01    STA SOURCESCREEN    LDA #$D8    STA SOURCESCREEN+1    STA DESTSCREEN+1    JSR COPYCOLRAM    LDA COFFS    CMP #$03    BNE *+4    LDA #$FF    CLC    ADC #$01    STA COFFS    LDY #39    JSR COPYTMPCHAR    LDY #39    JSR COPYTMPCOLOR    RTS; SHIFT SCREEN LEFTRCOPYSCREENRAM    LDX #24    LDY #$00    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    INY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    INY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    INY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    INY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    INY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    INY    CPY #36    BNE RCOPYSCREENRAM+4    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    INY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    INY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    INY    LDA SOURCESCREEN    CLC    ADC #40    STA SOURCESCREEN    BCC *+4    INC SOURCESCREEN+1    LDA DESTSCREEN    CLC    ADC #40    STA DESTSCREEN    BCC *+4    INC DESTSCREEN+1    DEX    BNE RCOPYSCREENRAM+2    RTS; SHIFT SCREEN RIGHTLCOPYSCREENRAM    LDX #24    LDY #38    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    CPY #2    BNE LCOPYSCREENRAM+4    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDA SOURCESCREEN    CLC    ADC #40    STA SOURCESCREEN    BCC *+4    INC SOURCESCREEN+1    LDA DESTSCREEN    CLC    ADC #40    STA DESTSCREEN    BCC *+4    INC DESTSCREEN+1    DEX    BNE LCOPYSCREENRAM+2    RTS; SHIFT SCREEN UPDCOPYSCREENRAM    LDX #23    LDY #39    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    CPY #3    BNE DCOPYSCREENRAM+4    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDA SOURCESCREEN    CLC    ADC #$28    STA SOURCESCREEN    BCC *+4    INC SOURCESCREEN+1    LDA DESTSCREEN    CLC    ADC #$28    STA DESTSCREEN    BCC *+4    INC DESTSCREEN+1    DEX    BNE DCOPYSCREENRAM+2    RTS; SHIFT SCREEN DOWNUCOPYSCREENRAM    LDX #23    LDY #39    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    CPY #3    BNE UCOPYSCREENRAM+4    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDA SOURCESCREEN    CLC    SBC #39    STA SOURCESCREEN    BCS *+4    DEC SOURCESCREEN+1    LDA DESTSCREEN    CLC    SBC #39    STA DESTSCREEN    BCS *+4    DEC DESTSCREEN+1    DEX    BNE UCOPYSCREENRAM+2    RTS; COPY ROW COLORCOPYROWRAM    LDX #6    LDY #39    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    CPY #3    BNE COPYROWRAM+4    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    DEY    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDA SOURCESCREEN    CLC    ADC #$A0    STA SOURCESCREEN    BCC *+4    INC SOURCESCREEN+1    LDA DESTSCREEN    CLC    ADC #$A0    STA DESTSCREEN    BCC *+4    INC DESTSCREEN+1    DEX    BNE COPYROWRAM+2    RTS; COPY COLUMN COLORCOPYCOLRAM    LDX #24    LDY #$24    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDY #$20    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDY #$1C    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDY #$18    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDY #$14    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDY #$10    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDY #$0C    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDY #$08    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDY #$04    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDY #$00    LDA (SOURCESCREEN),Y    STA (DESTSCREEN),Y    LDA SOURCESCREEN    CLC    ADC #$28    STA SOURCESCREEN    BCC *+4    INC SOURCESCREEN+1    LDA DESTSCREEN    CLC    ADC #$28    STA DESTSCREEN    BCC *+4    INC DESTSCREEN+1    DEX    BNE COPYCOLRAM+2    RTSCOPYCOLORTMP    LDA #$00    STA SOURCESCREEN    LDA #$D8    STA SOURCESCREEN+1    LDA TEMPADDRESS+2    STA CCT2+1    LDA TEMPADDRESS+3    STA CCT2+2    JSR COPYCOLUMNTMP    RTSCOPYTMPCOLOR    LDA #$00    STA SOURCESCREEN    LDA #$D8    STA SOURCESCREEN+1    LDA TEMPADDRESS+2    STA CTC1+1    LDA TEMPADDRESS+3    STA CTC1+2    JSR COPYTMPCOLUMN    RTSCOPYCHARTMP    LDA #$00    STA SOURCESCREEN    LDA #$04    STA SOURCESCREEN+1    LDA TEMPADDRESS    STA CCT2+1    LDA TEMPADDRESS+1    STA CCT2+2    JSR COPYCOLUMNTMP    RTSCOPYTMPCHAR    LDA #$00    STA SOURCESCREEN    LDA #$04    STA SOURCESCREEN+1    LDA TEMPADDRESS    STA CTC1+1    LDA TEMPADDRESS+1    STA CTC1+2    JSR COPYTMPCOLUMN    RTSCOPYCOLUMNTMP    LDX #24CCT1    LDA (SOURCESCREEN),YCCT2    STA $FFFF,X    LDA SOURCESCREEN    CLC    ADC #40    STA SOURCESCREEN    BCC *+4    INC SOURCESCREEN+1    DEX    BPL CCT1    RTSCOPYTMPCOLUMN    LDX #24CTC1    LDA $FFFF,X    STA (SOURCESCREEN),Y    LDA SOURCESCREEN    CLC    ADC #40    STA SOURCESCREEN    BCC *+4    INC SOURCESCREEN+1    DEX    BPL CTC1    RTSCOPYROWTMP    LDX #39CRT1    LDA (SOURCESCREEN),YCRT2    STA $FFFF,X    DEX    DEY    BPL CRT1    RTSCOPYTMPROW    LDX #39CTR1    LDA $FFFF,X    STA (SOURCESCREEN),Y    DEX    DEY    BPL CTR1    RTSTMPTMPE *= TMP+41TMPCOLTMPCOLE *= TMPCOL+41TEMPADDRESS    .WORD TMP,TMPCOLDX  .BYTE 0     ; LEFT/RIGHT FLAGDY  .BYTE 0     ; UP/DOWN FLAGSTOP .BYTE 0    ; KEYDOWN OFFXOFFSET .BYTE 0 ; SMOOTH SCROLLINGCOFFS .BYTE 0   ; COLUMN OFFSETROFFS .BYTE 0   ; ROW OFFSET